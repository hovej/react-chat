(this["webpackJsonpreact-chat"]=this["webpackJsonpreact-chat"]||[]).push([[0],{14:function(e,t,a){e.exports={Box:"Input_Box__yz4VE",Input:"Input_Input__3r5Ke",invalid:"Input_invalid__1XscM",Label:"Input_Label__1qyHr",Tooltip:"Input_Tooltip__vgXL0"}},16:function(e,t,a){e.exports={ChatSend:"ChatSend_ChatSend__XMufG",Input:"ChatSend_Input__2CYJT",Button:"ChatSend_Button__1vPq5"}},17:function(e,t,a){e.exports={Input:"Feedback_Input__3fqyB",Form:"Feedback_Form__aPM1Q",Button:"Feedback_Button__2vAps"}},21:function(e,t,a){e.exports={Page:"CreateAccount_Page__2J3Q7",Create:"CreateAccount_Create__HjCEJ"}},22:function(e,t,a){e.exports={CreateSuccess:"CreateSuccess_CreateSuccess__PQjLb",Link:"CreateSuccess_Link__sIM1c"}},23:function(e,t,a){e.exports={Page:"Login_Page__1vbLJ",Container:"Login_Container__3K-Mm"}},35:function(e,t,a){e.exports={Navigation:"Navigation_Navigation__1tTPb"}},36:function(e,t,a){e.exports={NavigationItem:"NavigationItem_NavigationItem__FKtYE"}},39:function(e,t,a){e.exports={Chat:"Chat_Chat__3NjUX"}},40:function(e,t,a){e.exports={History:"ChatHistory_History__3CgV8"}},41:function(e,t,a){e.exports={Message:"Message_Message__L9LXR"}},42:function(e,t,a){e.exports={Members:"Members_Members__1Tn2e"}},43:function(e,t,a){e.exports={Server:"ChatServer_Server__2djAa"}},44:function(e,t,a){e.exports={Button:"Button_Button__3gFiX"}},45:function(e,t,a){e.exports={Modal:"Modal_Modal__1-5dN"}},46:function(e,t,a){e.exports={Backdrop:"Backdrop_Backdrop__3j6VK"}},47:function(e,t,a){e.exports=a(75)},52:function(e,t,a){},75:function(e,t,a){"use strict";a.r(t);var n=a(0),o=a.n(n),r=a(34),s=a.n(r),c=(a(52),a(3)),l=a(4),u=a(6),i=a(5),m=a(1),p=a(10),h=a(35),d=a.n(h),g=a(36),v=a.n(g),f=function(e){return o.a.createElement("li",{className:v.a.NavigationItem},o.a.createElement(p.b,{to:e.location},e.children))},y=function(e){return o.a.createElement("ul",{className:d.a.Navigation},o.a.createElement(f,{location:"/login"},"Logout"),o.a.createElement(f,{location:"/settings"},"Settings"),o.a.createElement(f,{location:"/home"},"Chat"))},b=function(e){return o.a.createElement("div",null,o.a.createElement(y,null),e.children)},E=a(38),_=a.n(E).a.create({baseURL:"https://react-chat-7c5b7.firebaseio.com"}),j=a(39),k=a.n(j),C=a(40),N=a.n(C),x=a(41),O=a.n(x),S=function(e){return o.a.createElement("div",{className:O.a.Message},o.a.createElement("h4",{style:{margin:"2px"}},e.user),o.a.createElement("p",{style:{margin:"2px"}},e.text))},T=function(e){Object(u.a)(a,e);var t=Object(i.a)(a);function a(){return Object(c.a)(this,a),t.apply(this,arguments)}return Object(l.a)(a,[{key:"componentDidMount",value:function(){var e=this;this.timer=setInterval((function(){console.log("updating..."),e.props.update()}),500)}},{key:"componentWillUnmount",value:function(){clearInterval(this.timer)}},{key:"render",value:function(){var e=[],t=Object.keys(this.props.messages);if(t.length>=20)for(var a=t.length-1;a>=t.length-50;a--)e.push(this.props.messages[t[a]]);else for(var n=t.length-1;n>=0;n--)e.push(this.props.messages[t[n]]);var r=e.map((function(e,t){return o.a.createElement(S,{key:t,user:e.user,text:e.text})}));return console.log("[ChatHistory] rendering..."),o.a.createElement("div",{className:N.a.History},r)}}]),a}(n.PureComponent),w=a(16),A=a.n(w),F=function(e){return o.a.createElement("form",{onSubmit:e.send,className:A.a.ChatSend},o.a.createElement("input",{className:A.a.Input,onChange:e.changed,value:e.value,placeholder:"Enter your message here"}),o.a.createElement("button",{className:A.a.Button},"SEND"))},M=function(e){return o.a.createElement("div",{className:k.a.Chat},o.a.createElement(T,{update:e.update,messages:e.messages}),o.a.createElement(F,{send:e.send,changed:e.changed,value:e.value}))},L=a(42),I=a.n(L),H=function(e){return console.log("[Member] rendering..."),o.a.createElement("p",null,e.name)},P=function(e){Object(u.a)(a,e);var t=Object(i.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(e=t.call.apply(t,[this].concat(o))).state={members:[]},e}return Object(l.a)(a,[{key:"componentDidMount",value:function(){var e=this,t=[];_.request("/accounts.json").then((function(a){for(var n in a.data)console.log(n),t.push({name:a.data[n].displayName,key:a.data[n].name});e.setState({members:t})})).catch((function(e){console.log(e)}))}},{key:"render",value:function(){var e=[];return this.state.members.length>0&&(e=this.state.members.map((function(e){return o.a.createElement(H,{key:e.key,name:e.name})}))),o.a.createElement("div",{className:I.a.Members},o.a.createElement("h3",null,"MEMBERS"),e)}}]),a}(o.a.PureComponent),B=a(17),D=a.n(B),q=function(e){Object(u.a)(a,e);var t=Object(i.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(e=t.call.apply(t,[this].concat(o))).state={text:""},e.onChangeHandler=function(t){e.setState({text:t.target.value}),t.preventDefault()},e.onSubmitHandler=function(t){var a={text:e.state.text};_.post("/feedback.json",a).then((function(t){console.log(t),e.setState({text:""})})).catch((function(e){console.log(e)})),t.preventDefault()},e}return Object(l.a)(a,[{key:"render",value:function(){return o.a.createElement("form",{className:D.a.Form,onSubmit:this.onSubmitHandler},o.a.createElement("textarea",{className:D.a.Input,onChange:this.onChangeHandler,placeholder:"Please enter your feedback here!",value:this.state.text}),o.a.createElement("button",{className:D.a.Button},"Submit"))}}]),a}(o.a.PureComponent),R=a(43),V=a.n(R),J=function(e){Object(u.a)(a,e);var t=Object(i.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(e=t.call.apply(t,[this].concat(o))).state={messages:[],user:"Anonymous",messageText:""},e.updateMessageHistory=function(){_.get("/messages.json").then((function(t){console.log(t.data),e.setState({messages:t.data})})).catch((function(e){console.log(e)}))},e.messageChangeHandler=function(t){e.setState({messageText:t.target.value}),t.preventDefault()},e.sendMessageHandler=function(t){var a={text:e.state.messageText,user:e.state.user};e.state.messages.hasOwnProperty("initial")&&_.delete("/messages/initial.json").then((function(e){console.log(e)})).catch((function(e){console.log(e)})),_.post("/messages.json",a).then((function(t){console.log(t),e.setState({messageText:""}),e.updateMessageHistory()})).catch((function(e){console.log(e)})),t.preventDefault()},e}return Object(l.a)(a,[{key:"componentDidMount",value:function(){var e=this;_.get("/messages.json").then((function(t){console.log(t.data),e.setState({messages:t.data,user:e.props.user})})).catch((function(e){console.log(e)}))}},{key:"render",value:function(){console.log("[ChatServer] rendering...");var e=o.a.createElement(M,{messages:this.state.messages,send:this.sendMessageHandler,changed:this.messageChangeHandler,update:this.updateMessageHistory,value:this.state.messageText});return this.state.messages||(e=null),o.a.createElement("div",{className:V.a.Server},o.a.createElement(q,null),e,o.a.createElement(P,null))}}]),a}(o.a.Component),U=function(e){return o.a.createElement("div",null,o.a.createElement("h1",null,"Error 404: Page not found"),o.a.createElement("p",null,"Plese return back to the ",o.a.createElement(p.b,{to:"/home"},"home")," screen."))},X=a(12),K=a(21),W=a.n(K),Q=a(14),Y=a.n(Q),G=function(e){var t=null,a=[Y.a.Input],n=null;switch(!e.isValid&&e.touched&&(a.push(Y.a.invalid),n=o.a.createElement("p",{className:Y.a.Tooltip},e.tooltip)),e.elementType){case"input":t=o.a.createElement("input",{className:a.join(" "),type:e.inputType,value:e.value,onChange:e.changed})}return o.a.createElement("div",{className:Y.a.Box},o.a.createElement("label",{className:Y.a.Label},e.name),t,n)},z=a(44),$=a.n(z),Z=function(e){return o.a.createElement("button",{disabled:e.disabled,onClick:e.clicked,className:$.a.Button},e.children)},ee=a(45),te=a.n(ee),ae=a(46),ne=a.n(ae),oe=function(e){return o.a.createElement("div",{className:ne.a.Backdrop},e.children)},re=function(e){Object(u.a)(a,e);var t=Object(i.a)(a);function a(){return Object(c.a)(this,a),t.apply(this,arguments)}return Object(l.a)(a,[{key:"render",value:function(){return o.a.createElement(o.a.Fragment,null,o.a.createElement(oe,null),o.a.createElement("div",{className:te.a.Modal},this.props.children))}}]),a}(o.a.Component),se=a(22),ce=a.n(se),le=function(e){return o.a.createElement("div",{className:ce.a.CreateSuccess},o.a.createElement("h3",null,"Congrats!"),o.a.createElement("p",null,"Your account has been successfully created."),o.a.createElement("p",null,"Please continue to the login page."),o.a.createElement(p.b,{className:ce.a.Link,to:"/login"},"CONTINUE"))},ue=function(e){Object(u.a)(a,e);var t=Object(i.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(e=t.call.apply(t,[this].concat(o))).state={createAccountForm:{username:{name:"Username",elementType:"input",inputType:"text",validation:{isRequired:!0,minLength:5,maxLength:15},valid:!1,touched:!1,value:"",tooltip:"A unique username between 5-15 characters"},displayName:{name:"Display Name",elementType:"input",inputType:"text",validation:{isRequired:!0,minLength:1,maxLength:20},valid:!1,touched:!1,value:"",tooltip:"This is the name other people will see you as"},password:{name:"Password",elementType:"input",inputType:"text",validation:{isRequired:!0,minLength:6,maxLength:20},valid:!1,touched:!1,value:"",tooltip:"Password must be between 6-20 characters"},key:{name:"Key",elementType:"input",inputType:"text",validation:{isRequired:!0,minLength:1,maxLength:15},valid:!1,touched:!1,value:"",tooltip:"The unique key that was given to you to test"}},validInfo:!1,keys:[],usernames:[],submitted:!1},e.onChangeHandler=function(t,a){var n=Object(X.a)({},e.state.createAccountForm),o=Object(X.a)({},e.state.createAccountForm[a]);o.value=t.target.value,o.valid=e.checkValidation(o.value,o.validation),o.touched=!0,n[a]=o;var r=e.isAccountValid(n);e.setState({createAccountForm:n,validInfo:r}),t.preventDefault()},e.checkValidation=function(e,t){var a=!0;return t.isRequired&&(a=e.length>0&&a),t.minLength&&(a=e.length>=t.minLength&&a),t.maxLength&&(a=e.length<=t.maxLength&&a),a},e.isAccountValid=function(e){var t=!0;for(var a in e)t=e[a].valid&&t;return t},e.createNewAccount=function(t){t.preventDefault();for(var a,n={username:e.state.createAccountForm.username.value,displayName:e.state.createAccountForm.displayName.value,password:e.state.createAccountForm.password.value},o=!1,r=0;r<e.state.keys.length;r++)e.state.createAccountForm.key.value===e.state.keys[r].key&&(o=!0,a=e.state.keys[r].name);for(var s=0;s<e.state.usernames.length;s++)if(n.username===e.state.usernames[s]){o=!1;var c=Object(X.a)({},e.state.createAccountForm),l=Object(X.a)({},c.username);l.value="This username is taken.",l.valid=!1,c.username=l,e.setState({createAccountForm:c})}if(o)_.post("/accounts.json",n).then((function(t){e.setState({submitted:!0}),_.delete("/keys/"+a+".json").then((function(e){console.log(e)})).catch((function(e){console.log(e)}))})).catch((function(e){console.log(e)}));else{var u=Object(X.a)({},e.state.createAccountForm),i=Object(X.a)({},u.key);i.value="Please enter a valid key.",i.valid=!1,u.key=i,e.setState({createAccountForm:u})}},e}return Object(l.a)(a,[{key:"componentDidMount",value:function(){var e=this;console.log(this.props);var t=[],a=[];_.request("/keys.json").then((function(n){for(var o in console.log(n),n.data)t.push({name:o,key:n.data[o]});console.log(t),_.request("/accounts.json").then((function(n){for(var o in console.log(n),n.data)a.push(n.data[o].username);console.log(a),e.setState({keys:t,usernames:a,submitted:!1})}))})).catch((function(e){console.log(e)}))}},{key:"render",value:function(){var e=this,t=[];for(var a in this.state.createAccountForm)t.push({name:a,config:this.state.createAccountForm[a]});var n=t.map((function(t){return o.a.createElement(G,{key:t.name,elementType:t.config.elementType,inputType:t.config.inputType,value:t.config.value,name:t.config.name,changed:function(a){return e.onChangeHandler(a,t.name)},isValid:t.config.valid,touched:t.config.touched,tooltip:t.config.tooltip})})),r=null;return this.state.submitted&&(console.log(this.state.keys),r=o.a.createElement(re,this.props,o.a.createElement(le,null))),o.a.createElement("div",{className:W.a.Page},r,o.a.createElement("h1",null,"Welcome to React Chat!"),o.a.createElement("p",null,"Create an Account"),o.a.createElement("form",{onSubmit:this.createNewAccount,className:W.a.Create},n,o.a.createElement(Z,{disabled:!this.state.validInfo},"CREATE")),o.a.createElement("p",null,"Already have an account? Sign in ",o.a.createElement(p.b,{to:"/login"},"here"),"."))}}]),a}(o.a.Component),ie=a(23),me=a.n(ie),pe=function(e){Object(u.a)(a,e);var t=Object(i.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(e=t.call.apply(t,[this].concat(o))).state={loginForm:{username:{name:"Username",elementType:"input",inputType:"text",value:""},password:{name:"Password",elementType:"input",inputType:"text",value:""}},validForm:!0},e.onChangeHandler=function(t,a){var n=Object(X.a)({},e.state.loginForm),o=Object(X.a)({},n[a]);o.value=t.target.value,n[a]=o,e.setState({loginForm:n}),t.preventDefault()},e.onSubmitHandler=function(t){t.preventDefault();var a=[],n=!1;_.request("/accounts.json").then((function(t){for(var o in t.data)a.push({name:o,username:t.data[o].username,password:t.data[o].password,displayName:t.data[o].displayName});for(var r=0;r<a.length;r++)a[r].username===e.state.loginForm.username.value&&a[r].password===e.state.loginForm.password.value&&(n=!0,e.props.updateName(a[r].displayName),e.props.history.push("/home"));n||e.setState({validForm:!1})})).catch((function(e){console.log(e)}))},e}return Object(l.a)(a,[{key:"componentDidMount",value:function(){console.log(this.props)}},{key:"render",value:function(){var e=this,t=null;this.state.validForm||(t=o.a.createElement("p",{style:{color:"red"}},"The username or password you entered is incorrect."));var a=[];for(var n in this.state.loginForm)a.push({name:n,config:this.state.loginForm[n]});var r=a.map((function(t){return o.a.createElement(G,{key:t.name,name:t.config.name,elementType:t.config.elementType,inputType:t.config.inputType,value:t.config.value,changed:function(a){return e.onChangeHandler(a,t.name)}})}));return o.a.createElement("div",{className:me.a.Page},o.a.createElement("h1",null,"Welcome to React Chat!"),o.a.createElement("p",null,"Please login below."),o.a.createElement("form",{onSubmit:this.onSubmitHandler,className:me.a.Container},t,r,o.a.createElement(Z,null,"LOGIN")),o.a.createElement("p",null,"Don't have an account yet? Sign up ",o.a.createElement(p.b,{to:"/create"},"here"),"."))}}]),a}(o.a.Component),he=Object(m.g)(pe),de=function(e){Object(u.a)(a,e);var t=Object(i.a)(a);function a(){return Object(c.a)(this,a),t.apply(this,arguments)}return Object(l.a)(a,[{key:"render",value:function(){return o.a.createElement("div",null,o.a.createElement("h1",null,"Settings Page"))}}]),a}(o.a.Component),ge=function(e){Object(u.a)(a,e);var t=Object(i.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(e=t.call.apply(t,[this].concat(o))).state={authenticated:!1,displayName:""},e.updateDisplayName=function(t){e.state.authenticated?e.setState({authenticated:!1,displayName:""}):e.setState({displayName:t,authenticated:!0})},e}return Object(l.a)(a,[{key:"render",value:function(){var e=this,t=o.a.createElement(m.a,{from:"/",to:"/login"});return this.state.authenticated&&(t=null),o.a.createElement(p.a,null,o.a.createElement(b,null,o.a.createElement(m.d,null,o.a.createElement(m.b,{path:"/login",render:function(){return o.a.createElement(he,Object.assign({updateName:e.updateDisplayName},e.props))}}),o.a.createElement(m.b,{path:"/create",component:ue}),t,o.a.createElement(m.b,{path:"/home",render:function(){return o.a.createElement(J,{user:e.state.displayName})}}),o.a.createElement(m.b,{path:"/settings",component:de}),o.a.createElement(m.a,{from:"/",exact:!0,to:"/login"}),o.a.createElement(m.b,{path:"/",component:U}))))}}]),a}(o.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(o.a.createElement(ge,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[47,1,2]]]);
//# sourceMappingURL=main.78aea092.chunk.js.map